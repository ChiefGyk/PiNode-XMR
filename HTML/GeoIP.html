<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Bootstrap 4 -->
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <!-- Load Ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>
    <!-- Font Awesome cdn -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Title  -->
    <title>PiNode-XMR - IP Geo locate</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
     <meta http-equiv="Pragma" content="no-cache" />
     <meta http-equiv="Expires" content="0" />
    <link rel="shortcut icon" type="image/x-icon" href="images/XMR.ico" />
    <!-- Custom Style Sheet -->
    <link rel="stylesheet" type="text/css" href="/app.css">
  </head>

  <body>

<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top">
  <a class="navbar-brand" href="index.html"><i class="fab fa-monero"></i> PiNode-XMR</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav justify-content-around w-100">
      <li class="nav-item">
        <a class="nav-link" href="node_status.html"><i class="fas fa-info"></i> Node Status</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="advanced-settings.html"><i class="fas fa-cogs"></i> Node Control</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/" onclick="javascript:event.target.port=4200;event.target.protocol='https:';"" ><i class="fas fa-terminal"></i> Web Terminal</a>
      </li>
      <li class="nav-item">
      <a class="nav-link" href="/" onclick="javascript:event.target.port=8081;event.target.protocol='http:';"" ><i class="fas fa-search-dollar"></i> Block Explorer</a>
      </li>      <li class="nav-item">
      <a class="nav-link" href="/" onclick="javascript:event.target.port=7657;event.target.protocol='http:';"" ><i class="fas fa-network-wired"></i> I2P Interface </a>      </li>      
      <li class="nav-item active">
      <a class="nav-link" href="GeoIP.html"><i class="fas fa-globe-americas"></i> IP2GEO</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="log.html"><i class="fas fa-file-alt"></i> Log</a>
      </li>
    </ul>
  </div>
</nav>

  <div class="container">
    <div class="row">
      <div class="col-lg-12">
          <img class="img-fluid d-block mx-auto" src="images/pinode-xmr-banner.png">
      </div>
    </div>

    <div class="row">
      <div class="col">
          <h2 class="text-center">
              <small>Private Dependable Nodes</small>
          </h2>
          <hr>
      </div> <!-- col -->
    </div> <!-- row -->
  </div> <!-- container -->

  <div class="container">
    <h3 class="demo-section-title">Connected Node Locations*:</h3>
	    <p><small>This page processes the (up to) 1000 "white" nodes listed in the connections tab, and attempts to locate them geographically. This is done by comparing the node IP address against the 'MaxMind GeoLite2-City' database. This is claimed to be 99% acurate for country location and 75% accurate for City location. However users of tor, VPNs and cloud hosted data centers cannot be traced. All data is processed locally on your device, including map rendering. No external sources (eg API) is used.<br><br>This is a near copy of the project found at <a href="https://github.com/pieqq/PyGeoIpMap" target="_blank">https://github.com/pieqq/PyGeoIpMap</a> and all credit should be given to that project author, this is simply applied to Monero Nodes.</small></p>

  </div> <!-- /container -->

    <div class="container py-4">
		<h3 class="font-weight-bold">Database: <small> Upload</small></h3>	
	    <p><small>I cannot distribute PiNode-XMR with the 'MaxMind GeoLite2-City' database included for licencing reasons. You will need to source your own copy of the database (it's free) and upload it to this device. A new updated database is avilable weekly.<br><br>The database can be sourced here -->   <a href="https://dev.maxmind.com/geoip/geoip2/geolite2/" target="_blank">MaxMind.com GeoIP2</a> and then uploaded using the box below<br><br> If you don't want to use this feature, an online list of all nodes can be viewed here instead -->   <a href="https://monerohash.com/nodes-distribution.html" target="_blank">https://monerohash.com/nodes-distribution.html</a></small></p>
	
        <div class="col-6 border p-2">
<form action="uploaddatabase.php" method="post" enctype="multipart/form-data">
    Select MaxMind's "GeoLite2-City.mmdb" database for upload:
    <input type="file" name="fileToUpload" id="fileToUpload" class="btn btn-block btn-lg py-4">
    <input type="submit" class="btn btn-block btn-lg btn-dark" value="Upload Database" name="submit">
</form>

  </div> <!-- /col -->
  
	<div class="container py-4">

		<h3 class="font-weight-bold">Pull data: <small> Extract raw IP data from "white" node list</small></h3>
		

      <div class="row demo-row">
        <div class="col-3">
		<a onclick="pulldata()" href="#Pull-Data" class="btn btn-block btn-lg btn-inverse">Pull White Node List  <span class="fui-location"></span></a>
		</div>

<script>
 function pulldata () {
      $.ajax({
        url:"pull-data.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>

	 <div class="col">
<p><small><embed src="node-list-timestamp.txt"
		width=300px
		height=80px></small></p>
     </div> <!-- /col -->
     </div> <!-- /row -->
</div> <!-- /container -->

	 			
<div class="container">
		<h3 class="font-weight-bold">World</h3>
		
      <div class="row demo-row">
        <div class="col-3">
		<a onclick="world()" href="#New-World" class="btn btn-block btn-lg btn-inverse">Create New World Node Map  <span class="fui-location"></span></a>
        </div>

<script>
 function world () {
      $.ajax({
        url:"world-map.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>

	 <div class="col">
<p><small><embed src="world-map-timestamp.txt"
		width=300px
		height=80px></small></p>
     </div> <!-- /col -->
     </div> <!-- /row -->
</div> <!-- /container -->
		
<img src="worldnodes.png" class="rounded img-fluid mx-auto" alt="World_Monero_Nodes">


<div class="container">
		<h3 class="font-weight-bold">United States</h3>

      <div class="row demo-row">
        <div class="col-3">
		<a onclick="us()" href="#New-United-States" class="btn btn-block btn-lg btn-inverse">Create New USA Node Map  <span class="fui-location"></span></a>
        </div>

<script>
 function us () {
      $.ajax({
        url:"us-map.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>

	 <div class="col">
<p><small><embed src="us-map-timestamp.txt"
		width=300px
		height=80px></small></p>
     </div> <!-- /col -->
     </div> <!-- /row -->
</div> <!-- /container -->
	 
<img src="usnodes.png" class="rounded img-fluid mx-auto" alt="US_Monero_Nodes">	
	
<div class="container">	
		<h3 class="font-weight-bold">Europe</h3>
		
      <div class="row demo-row">
        <div class="col-3">
		<a onclick="europe()" href="#New-Europe" class="btn btn-block btn-lg btn-inverse">Create New Europe Node Map  <span class="fui-location"></span></a>
        </div>

<script>
 function europe () {
      $.ajax({
        url:"europe-map.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>

	 <div class="col">
<p><small><embed src="europe-map-timestamp.txt"
		width=300px
		height=80px></small></p>
     </div> <!-- /col -->
     </div> <!-- /row -->
</div> <!-- /container -->		
		
<img src="europenodes.png" class="rounded img-fluid mx-auto" alt="Europe_Monero_Nodes">	

<div class="container">		
		<h3 class="font-weight-bold">United Kingdom</h3>
      <div class="row demo-row">
        <div class="col-3">
		<a onclick="uk()" href="#New-United-Kingdom" class="btn btn-block btn-lg btn-inverse">Create New UK Node Map  <span class="fui-location"></span></a>
        </div>

<script>
 function uk () {
      $.ajax({
        url:"uk-map.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>

	 <div class="col">
<p><small><embed src="uk-map-timestamp.txt"
		width=300px
		height=80px></small></p>
     </div> <!-- /col -->
     </div> <!-- /row -->
</div> <!-- /container -->			
		
<img src="uknodes.png" class="rounded img-fluid mx-auto" alt="UK_Monero_Nodes">
	
<div class="container">
<h1 class="font-weight-bold">CSV Global Node Locations*:</h1>			
	    <p><small>Below is a csv style database of the white nodes this PiNodeXMR can see. IP data has been collected by the node and processed locally offline with tools provided by <a href="https://pypi.org/project/ip2geotools/ " target="_blank">https://pypi.org/project/ip2geotools/</a> using the MaxMind GeoLite2-City database. The results below are TAB separated for your convenience, this data exports nicely for use in speadsheets.</a></small></p>

      <div class="row demo-row">
        <div class="col-3">
		<a onclick="csv()" href="#New-CSV" class="btn btn-block btn-lg btn-inverse">Generate new CSV data  <span class="fui-location"></span></a>
        </div>

<script>
 function csv () {
      $.ajax({
        url:"csv.php", //the page containing php script
        type: "POST", //request type
        success:function(result){
         alert(result);
       }
     });
 }
</script>		
     </div> <!-- /row -->
	 
		<p> <embed src="IPGEO-CSV.txt"
					width=1000px
					height=2000px> </p>
	      
</div> <!-- /container -->
	
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Bootstrap 4 requires Popper.js -->
    <script src="https://unpkg.com/popper.js@1.14.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="http://vjs.zencdn.net/6.6.3/video.js"></script>
    <script src="dist/scripts/flat-ui.js"></script>
    <script src="docs/assets/js/application.js"></script>
	
  </body>
</html>
